<html>
  <head>
    <title>Season's Greetings!</title>
    <meta property="og:title" content="Season's Greetings!" />
    <meta
      property="og:image"
      content="https://love.from.nhawk.in/s/header.png"
    />
    <meta
      property="og:video"
      content="https://love.from.nhawk.in/s/snowday.mp4"
    />

    <meta property="og:url" content="https://love.from.nhawk.in/s/" />
    <meta property="og:type" content="website" />
    <meta
      property="og:description"
      content="a little card with love from me to u"
    />

    <meta
      name="viewport"
      content="width=device-width, initial-scale=.5, maximum-scale=12.0, minimum-scale=.1, user-scalable=yes"
    />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Berkshire+Swash&family=Caramel&&display=swap"
      rel="stylesheet"
    />
    <style>
      html,
      body {
        margin: 0;
        height: 100%;
        width: 100%;
      }
      section {
        margin: calc((100vh - 64vh) / 2) auto;
        position: relative;
        width: 48vh;
        height: 64vh;
        perspective: 1000px;
      }
      #left,
      #right {
        position: absolute;
        width: 48vh;
        height: 64vh;
        text-align: center;
        box-shadow: 5px 5px 15px #333;
      }
      #left {
        background: #abc;
        transform-origin: left center;
        transition: transform 2s;
        z-index: 2;
      }
      #right {
        background: #fff;
        z-index: 1;
        overflow-y: auto;
      }
      #left.open {
        transform: rotateY(-180deg);
      }

      h1 {
        font-family: "Caramel", serif;
        color: darkred;
        font-size: 2rem;
      }

      p {
        font-family: "Berkshire Swash", serif;
        color: darkgreen;
        text-align: left;
        padding: 0 1rem;
      }

      .hidden {
        display: none;
      }
    </style>
    <script>
      window.onload = () => {
        console.log("huh");
        const messages = [
          "1QJYr8Snae3qIoHaxMxpMrUhYd+BIw==",
          "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",
        ];
        let status = "closed";

        function open() {
          if (status === "closed") {
            console.log("opening");
            document.getElementById("left").className = "open";
            status = "opening";
            setTimeout(() => {
              document.getElementById("outerCard").className = "hidden";
              document.getElementById("innerCard").className = "";
              document.getElementById("music").currentTime = 0;
              document.getElementById("music").play();
            }, 500);
            setTimeout(() => {
              status = "open";
            }, 2000);
          }
        }
        function close() {
          if (status === "open") {
            document.getElementById("left").className = "";
            status = "closing";
            setTimeout(() => {
              document.getElementById("music").pause();
              document.getElementById("outerCard").className = "";
              document.getElementById("innerCard").className = "hidden";
            }, 500);
            setTimeout(() => {
              status = "closed";
            }, 2000);
          }
        }

        function fromBase64(base64) {
          var binary = atob(base64);
          var bytes = new Uint8Array(binary.length);
          for (var i = 0; i < binary.length; i++) {
            bytes[i] = binary.charCodeAt(i);
          }
          return bytes.buffer;
        }

        async function decryptMessage(pwd, possibleMessages) {
          const encoder = new TextEncoder();
          const iv = new Uint8Array([
            163, 215, 143, 57, 240, 175, 190, 63, 61, 96, 44, 76,
          ]);
          const salt = encoder.encode("And a happy new year!");
          const key = await crypto.subtle.deriveKey(
            {
              name: "PBKDF2",
              salt,
              iterations: 100000,
              hash: "SHA-256",
            },
            await crypto.subtle.importKey(
              "raw",
              encoder.encode(pwd),
              "PBKDF2",
              false,
              ["deriveBits", "deriveKey"]
            ),
            {
              name: "AES-GCM",
              length: 256,
            },
            true,
            ["encrypt", "decrypt"]
          );
          for (message of possibleMessages) {
            try {
              const messageCypherText = fromBase64(message);
              const decrypted = await crypto.subtle.decrypt(
                {
                  name: "AES-GCM",
                  iv,
                },
                key,
                messageCypherText
              );
              return new TextDecoder().decode(decrypted);
            } catch (err) {
              console.log(err);
              // no need to do anything
            }
          }
          return null;
        }

        async function decryptAndReplaceMessage() {
          if (window.location.hash) {
            const [pwd, secret] = window.location.hash.slice(1).split(":");

            const contents = await decryptMessage(pwd, messages);
            if (contents) {
              const innerHtml = contents.replace("SECRET", secret);
              document.getElementById("message").innerHTML = innerHtml;
            }
          }
        }

        document.getElementById("outerCard").addEventListener("click", open);
        document.getElementById("innerCard").addEventListener("click", close);
        document.getElementById("right").addEventListener("click", close);

        decryptAndReplaceMessage();
        window.setTimeout(open, 10_000);
      };
    </script>
  </head>
  <body>
    <image
      src="snow6.jpg"
      width="100%"
      height="100%"
      style="position: fixed; top: 0"
    />
    <section>
      <div id="left">
        <div id="outerCard">
          <video autoplay loop muted width="100%" height="100%">
            <source src="snowday.mp4" type="video/mp4" />
          </video>
        </div>
        <image
          class="hidden"
          id="innerCard"
          src="onwards.jpg"
          width="100%"
          height="100%"
        />
      </div>
      <div id="right">
        <audio id="music" controls>
          <source src="joytotheworld.mp3" type="audio/mpeg" />
        </audio>
        <div id="message">
          <h1>Season's Greetings and a Happy Holidays!</h1>
          <p>
            Hope you are well and wishing you all the best as we head off into
            the new year!
          </p>
          <p>With love from Nolan (&amp; Olympia)</p>
        </div>
      </div>
    </section>
  </body>
</html>
